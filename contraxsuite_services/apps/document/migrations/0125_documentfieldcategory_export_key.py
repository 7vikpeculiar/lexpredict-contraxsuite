# -*- coding: utf-8 -*-
# Generated by Django 1.11.18 on 2019-03-14 08:50
from __future__ import unicode_literals

import apps.common.fields
from django.db import migrations
import uuid


def init_export_key(apps, schema_editor):
    DocumentFieldCategory = apps.get_model('document', 'DocumentFieldCategory')
    for category in DocumentFieldCategory.objects.all():
        category.export_key = uuid.uuid4()
        category.save()


class Migration(migrations.Migration):

    dependencies = [
        ('document', '0124_auto_20190311_0855'),
    ]

    operations = [
        migrations.AddField(
            model_name='documentfieldcategory',
            name='export_key',
            field=apps.common.fields.StringUUIDField(default=None, unique=True, null=True, editable=True),
        ),

        migrations.RunPython(init_export_key, reverse_code=migrations.RunPython.noop),

        migrations.AlterField(
            model_name='documentfieldcategory',
            name='export_key',
            field=apps.common.fields.StringUUIDField(default=uuid.uuid4, unique=True, null=False, editable=True),
        ),
    ]
